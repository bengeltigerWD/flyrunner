<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Smart HTML Studio</title>
<style>
* { box-sizing: border-box; }
body {
  font-family: 'Poppins', sans-serif;
  margin: 0; background: var(--bg); color: var(--text);
  --bg: #f4f4f9; --text: #222; --panel: #fff;
  --border: #ddd; --accent: #0078ff;
  transition: 0.3s all ease;
}
body.dark { --bg: #1e1e1e; --text: #ddd; --panel: #2c2c2c; --border: #444; }
header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 10px 15px; background: var(--panel);
  border-bottom: 1px solid var(--border);
}
header h1 { font-size: 1.2em; margin: 0; }
header button {
  margin-left: 6px; border: none; background: var(--accent); color: #fff;
  padding: 6px 10px; border-radius: 5px; cursor: pointer; transition: 0.2s;
}
header button:hover { opacity: 0.85; }
#container {
  display: flex; height: calc(100vh - 120px);
}
#editor, #output {
  flex: 1; border: 1px solid var(--border); margin: 10px;
  border-radius: 10px; overflow: hidden;
}
#editor textarea {
  width: 100%; height: 100%; border: none; outline: none;
  background: var(--panel); color: var(--text);
  font-family: monospace; font-size: 14px; padding: 10px;
  resize: none;
}
iframe { width: 100%; height: 100%; border: none; background: #fff; }
footer {
  text-align: center; padding: 10px; font-size: 0.9em;
  background: var(--panel); border-top: 1px solid var(--border);
}
footer a { color: var(--accent); text-decoration: none; }
footer a:hover { text-decoration: underline; }

#modal, #register {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.6); display: none; align-items: center; justify-content: center;
}
.modal-content, .register-box {
  background: var(--panel); padding: 20px; border-radius: 10px; width: 300px;
}
.modal-content ul { list-style: none; padding: 0; }
.modal-content li {
  margin: 5px 0; display: flex; justify-content: space-between;
}
.modal-content li button { background: red; color: white; border: none; border-radius: 4px; cursor: pointer; }

.register-box input {
  width: 100%; margin: 5px 0; padding: 8px; border-radius: 5px;
  border: 1px solid var(--border); font-family: inherit;
}
.register-box button {
  width: 100%; padding: 8px; border: none; background: var(--accent);
  color: white; border-radius: 5px; margin-top: 10px; cursor: pointer;
}
</style>
</head>
<body>

<!-- Registration Form -->
<div id="register">
  <div class="register-box">
    <h3>Sign Up</h3>
    <input type="text" id="name" placeholder="Full Name" required>
    <input type="email" id="email" placeholder="Email" required>
    <input type="tel" id="mobile" placeholder="Mobile Number" required>
    <button id="signupBtn">Sign Up</button>
  </div>
</div>

<header>
  <h1>Smart HTML Studio</h1>
  <div>
    <button id="newBtn">‚ûï</button>
    <button id="openBtn">Open</button>
    <button id="saveBtn">Save</button>
    <button id="runBtn">Run</button>
    <button id="themeBtn">üåó</button>
  </div>
</header>

<div id="container">
  <div id="editor">
    <textarea id="code" placeholder="Write your HTML, CSS & JS here..."></textarea>
  </div>
  <div id="output">
    <iframe id="preview"></iframe>
  </div>
</div>

<footer>
  Developed by Ajmir Ahmed ‚Äî <a href="https://example.com" target="_blank">Visit Website</a>
</footer>

<!-- Project Modal -->
<div id="modal">
  <div class="modal-content">
    <h3>Saved Projects</h3>
    <ul id="projectList"></ul>
    <button onclick="closeModal()">Close</button>
  </div>
</div>

<script>
// ========== Registration ==========
const register = document.getElementById('register');
if (!localStorage.getItem('registered')) {
  register.style.display = 'flex';
}
document.getElementById('signupBtn').onclick = () => {
  const name = nameInput.value.trim();
  const email = emailInput.value.trim();
  const mobile = mobileInput.value.trim();
  if (!name || !email || !mobile) return alert('Fill all fields');
  // Send via Formspree
  fetch('https://formspree.io/f/xleqzeen', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name, email, mobile })
  }).then(() => {
    localStorage.setItem('registered', 'true');
    register.style.display = 'none';
    alert('Registered successfully!');
  }).catch(() => {
    localStorage.setItem('registered', 'true');
    register.style.display = 'none';
  });
};
const nameInput = document.getElementById('name');
const emailInput = document.getElementById('email');
const mobileInput = document.getElementById('mobile');

// ========== Editor Logic ==========
const textarea = document.getElementById('code');
const iframe = document.getElementById('preview');

function runCode() {
  iframe.srcdoc = textarea.value;
}
document.getElementById('runBtn').onclick = runCode;

// Auto close tag
textarea.addEventListener('input', e => {
  const val = textarea.value;
  const last = val.slice(-1);
  if (last === '>') {
    const openTag = val.match(/<(\w+)>$/);
    if (openTag) {
      textarea.value += `</${openTag[1]}>`;
    }
  }
});

// ========== Project Handling ==========
let currentProject = null;

function saveProject() {
  const name = currentProject || prompt('Enter project name:');
  if (!name) return;
  localStorage.setItem('project_' + name, textarea.value);
  currentProject = name;
  alert('Project saved!');
}

function newProject() {
  if (confirm('Create new project? Unsaved work will be lost.')) {
    textarea.value = '';
    currentProject = null;
  }
}

function openProject() {
  const modal = document.getElementById('modal');
  const list = document.getElementById('projectList');
  list.innerHTML = '';
  Object.keys(localStorage).forEach(k => {
    if (k.startsWith('project_')) {
      const name = k.replace('project_', '');
      const li = document.createElement('li');
      li.innerHTML = `<span>${name}</span>
        <div>
          <button onclick="loadProject('${name}')">Open</button>
          <button onclick="deleteProject('${name}')">‚ùå</button>
        </div>`;
      list.appendChild(li);
    }
  });
  modal.style.display = 'flex';
}
function closeModal() { document.getElementById('modal').style.display = 'none'; }

function loadProject(name) {
  textarea.value = localStorage.getItem('project_' + name);
  currentProject = name;
  closeModal();
}

function deleteProject(name) {
  if (confirm('Delete this project?')) {
    localStorage.removeItem('project_' + name);
    openProject();
  }
}

document.getElementById('saveBtn').onclick = saveProject;
document.getElementById('openBtn').onclick = openProject;
document.getElementById('newBtn').onclick = newProject;

// ========== Theme ==========
document.getElementById('themeBtn').onclick = () => {
  document.body.classList.toggle('dark');
  localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
};
if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark');
</script>
</body>
</html>
